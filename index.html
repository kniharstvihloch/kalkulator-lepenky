<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Kalkul치tor 콏ezan칠 lepenky</title>
<style>
body{
  font-family: Arial;
  max-width: 700px;
  margin: 40px auto;
}
input, select{
  padding:6px;
  margin:5px 0;
}
.box{
  background:#f3f3f3;
  padding:15px;
  margin-top:15px;
}
.total{
  font-size:22px;
  font-weight:bold;
  margin-top:15px;
}
</style>
</head>
<body>

<h2>Kalkul치tor 콏ezan칠 kniha콏sk칠 lepenky</h2>

<label>S칤la lepenky:</label><br>
<select id="tloustka">
  <option value="14">1 mm (14 K캜 / arch)</option>
  <option value="21">1,5 mm (21 K캜 / arch)</option>
  <option value="25">2 mm (25 K캜 / arch)</option>
  <option value="30">2,5 mm (30 K캜 / arch)</option>
  <option value="35">3 mm (35 K캜 / arch)</option>
  <option value="43">3,5 mm (43 K캜 / arch)</option>
</select><br>

<label>먞솬뗢a (mm):</label><br>
<input type="number" id="sirka"><br>

<label>V칳코ka (mm):</label><br>
<input type="number" id="vyska"><br>

<label>Po캜et kus콢:</label><br>
<input type="number" id="pocet" value="1"><br>

<div class="box" id="vysledek"></div>

<div class="total" id="finalCena">Celkov치 cena: 0 K캜</div>
  
<button onclick="prejitNaObjednavku()">P콏ej칤t na objedn치vku</button>

<button onclick="window.open('https://www.kniharstvijihlava.cz/e-shop/kniharske-lepenky/kniharska-lepenka-2/kniharska-lepenka-500-x-700-rezani-na-miru/', '_blank')">
Otev콏칤t produkt pro objedn치n칤
</button>
  
<script>

const ARCH_SIRKA = 500;
const ARCH_VYSKA = 700;

function spocitat(){

let sirka = parseFloat(document.getElementById("sirka").value);
let vyska = parseFloat(document.getElementById("vyska").value);
let pocet = parseInt(document.getElementById("pocet").value);
let cenaArch = parseFloat(document.getElementById("tloustka").value);

if(!sirka || !vyska || !pocet) return;

let kusyA = Math.floor(ARCH_SIRKA / sirka) *
            Math.floor(ARCH_VYSKA / vyska);

let kusyB = Math.floor(ARCH_SIRKA / vyska) *
            Math.floor(ARCH_VYSKA / sirka);

let kusyNaArch = Math.max(kusyA, kusyB);

if(kusyNaArch < 1){
  document.getElementById("vysledek").innerHTML =
  "Rozm캩r se nevejde do archu 500칑700 mm.";
  return;
}

let potrebneArchy = Math.ceil(pocet / kusyNaArch);
let cenaMaterial = potrebneArchy * cenaArch;

let cenaRezZaKus = 3;
if(pocet >= 11 && pocet <= 100) cenaRezZaKus = 2;
if(pocet >= 101) cenaRezZaKus = 1;

let cenaRez = pocet * cenaRezZaKus;
let final = cenaMaterial + cenaRez;

document.getElementById("vysledek").innerHTML =
"Na jeden arch se vejde: <b>" + kusyNaArch + " ks</b><br>" +
"Pot콏ebn칳 po캜et arch콢: <b>" + potrebneArchy + "</b><br>" +
"Cena materi치lu: <b>" + cenaMaterial.toFixed(2) + " K캜</b><br>" +
"Cena 콏ez치n칤: <b>" + cenaRez.toFixed(2) + " K캜</b>";

let finalRounded = Math.round(final);

document.getElementById("finalCena").innerHTML =
"<div style='font-size:22px;font-weight:bold;'>Celkov치 cena: " 
+ finalRounded + " K캜</div>" +

"<div style='margin-top:15px;padding:15px;background:#e8f5e9;border:2px solid #2e7d32;'>" +
"<strong>游녤 Pro objedn치n칤:</strong><br>" +
"Na str치nce produktu zadejte do pole <strong>MNO콯STV칈</strong> hodnotu:<br><br>" +
"<span style='font-size:28px;font-weight:bold;color:#2e7d32;'>" 
+ finalRounded + "</span><br><br>" +
"(Produkt m치 cenu 1 K캜, mno쬽tv칤 = v칳sledn치 cena v K캜)" +
"</div>";

}

document.addEventListener("input", spocitat);
document.addEventListener("change", spocitat);
  
function prejitNaObjednavku(){

let sirka = document.getElementById("sirka").value;
let vyska = document.getElementById("vyska").value;
let pocet = document.getElementById("pocet").value;
let cenaText = document.getElementById("finalCena").innerText;

if(!sirka || !vyska || !pocet){
  alert("Nejprve vypl켿te v코echny 칰daje.");
  return;
}

let text =
"콎EZ츼N칈 NA M칈RU\n" +
"Rozm캩r: " + sirka + " 칑 " + vyska + " mm\n" +
"Po캜et: " + pocet + " ks\n" +
cenaText;

alert("Zkop칤rujte si tuto konfiguraci do pozn치mky objedn치vky:\n\n" + text);

window.location.href = "https://www.kniharstvijihlava.cz/e-shop/kniharske-lepenky/kniharska-lepenka-2/kniharska-lepenka-500-x-700-rezani-na-miru/";

}
let url = "https://www.kniharstvijihlava.cz/e-shop/kniharske-lepenky/kniharska-lepenka-2/kniharska-lepenka-500-x-700-rezani-na-miru" +
"?sirka=" + sirka +
"&vyska=" + vyska +
"&pocet=" + pocet +
"&tloustka=" + tloustka +
"&cena=" + encodeURIComponent(cena);

window.location.href = url;

}
</script>

</body>
</html>
